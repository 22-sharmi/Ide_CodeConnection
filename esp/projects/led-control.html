<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ESP32 LED Control</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    function toggleSection(id) {
      document.getElementById(id).classList.toggle("hidden");
    }
    function showCode(id) {
      document.getElementById("espOwnCode").classList.add("hidden");
      document.getElementById("hotspotCode").classList.add("hidden");
      document.getElementById(id).classList.remove("hidden");
    }
  </script>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 text-gray-800 min-h-screen flex flex-col items-center py-10 px-4">

  <div class="w-full max-w-5xl">
    <!-- Header -->
    <h1 class="text-4xl font-extrabold text-center mb-3 bg-gradient-to-r from-indigo-600 to-green-500 bg-clip-text text-transparent">
      ESP32 - LED Control
    </h1>
    <p class="mb-8 text-center text-lg text-gray-600">Control an LED using <strong>Bluetooth</strong> or <strong>WiFi</strong> with ESP32</p>

    <!-- Bluetooth Section -->
    <div class="bg-white shadow-lg rounded-2xl p-6 mb-12">
      <h2 class="text-2xl font-bold mb-4 text-center text-green-700">Bluetooth LED Control</h2>

      <!-- Show Notes Button -->
      <div class="text-center mb-4">
        <button onclick="toggleSection('btNotes')" class="bg-green-500 text-white px-6 py-2 rounded-xl shadow hover:bg-green-600 transition">
          Show Notes
        </button>
      </div>

      <!-- Notes -->
      <div id="btNotes" class="hidden bg-green-50 border border-green-200 rounded-xl p-5 mb-6">
        <!-- your notes unchanged -->
        <h3 class="text-xl font-semibold mb-2">Bluetooth Notes</h3>
        <p class="mb-2"><strong>What is Bluetooth?</strong><br>
        Bluetooth is a short-range wireless technology that allows devices to communicate without cables.</p>

        <p class="mb-2"><strong>How ESP32 uses Bluetooth:</strong><br>
        ESP32 has inbuilt <em>Bluetooth Classic (Serial)</em> and <em>BLE (Low Energy)</em>.  
        In this project we use Bluetooth Serial to send simple text commands ("ON", "OFF").</p>

        <p class="mb-2"><strong>How to Connect:</strong><br>
        - Upload the code and power the ESP32.<br>
        - On your phone, open <em>Bluetooth Terminal app</em> (like “Serial Bluetooth Terminal” on Android).<br>
        - Pair with ESP32 (device name shown in code, e.g. <code>ESP32_LED</code>).<br>
        - Type "ON" or "OFF" to control LED.</p>

        <p class="mb-2"><strong>Applications:</strong></p>
        <ul class="list-disc pl-5 space-y-1">
          <li>Home automation without WiFi</li>
          <li>Robot control via phone</li>
          <li>Short-range device communication</li>
        </ul>
      </div>

      <!-- Comparison Table -->
      <h2 class="text-2xl font-bold text-center mb-4">Bluetooth vs WiFi in ESP32</h2>
      <div class="overflow-x-auto">
        <table class="table-auto border border-gray-300 mb-10 w-full text-center rounded-lg overflow-hidden shadow">
          <thead>
            <tr class="bg-gray-200">
              <th class="border px-4 py-2">Feature</th>
              <th class="border px-4 py-2">Bluetooth</th>
              <th class="border px-4 py-2">WiFi</th>
            </tr>
          </thead>
          <tbody class="divide-y">
            <tr class="hover:bg-gray-50">
              <td class="border px-4 py-2">Range</td>
              <td class="border px-4 py-2">~10m</td>
              <td class="border px-4 py-2">~100m</td>
            </tr>
            <tr class="hover:bg-gray-50">
              <td class="border px-4 py-2">Speed</td>
              <td class="border px-4 py-2">Low (kbps)</td>
              <td class="border px-4 py-2">High (Mbps)</td>
            </tr>
            <tr class="hover:bg-gray-50">
              <td class="border px-4 py-2">Power Usage</td>
              <td class="border px-4 py-2">Low</td>
              <td class="border px-4 py-2">Higher</td>
            </tr>
            <tr class="hover:bg-gray-50">
              <td class="border px-4 py-2">Best For</td>
              <td class="border px-4 py-2">Short-range, simple control</td>
              <td class="border px-4 py-2">IoT, remote access, automation</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Code -->
      <pre class="bg-gray-900 text-green-300 p-4 rounded-xl text-sm overflow-x-auto"><code>
#include "BluetoothSerial.h"

BluetoothSerial SerialBT;
int ledPin = 2;

void setup() {
  pinMode(ledPin, OUTPUT);
  Serial.begin(115200);
  SerialBT.begin("ESP32_LED"); 
  Serial.println("Bluetooth ready. Type ON or OFF.");
}

void loop() {
  if (SerialBT.available()) {
    String command = SerialBT.readStringUntil('\n');
    command.trim();

    if (command == "ON") {
      digitalWrite(ledPin, HIGH);
      SerialBT.println("LED is ON");
    } else if (command == "OFF") {
      digitalWrite(ledPin, LOW);
      SerialBT.println("LED is OFF");
    } else {
      SerialBT.println("Invalid command");
    }
  }
}
</code></pre>
    </div>

    <!-- WiFi Section -->
    <div class="bg-white shadow-lg rounded-2xl p-6">
      <div class="text-center mb-6">
        <button onclick="toggleSection('wifiNotes')" class="bg-blue-600 text-white px-6 py-2 rounded-xl shadow hover:bg-blue-700 transition">WiFi</button>
      </div>

      <!-- WiFi Notes + Mode Buttons -->
      <div id="wifiNotes" class="hidden">
        <div class="bg-blue-50 p-4 rounded-xl mb-6 border border-blue-200">
          <!-- your wifi notes unchanged -->
          <h3 class="text-xl font-semibold mb-2">WiFi Notes</h3>
          <p class="mb-2"><strong>What is WiFi?</strong><br>
          WiFi allows devices to communicate over a wireless network with longer range than Bluetooth.</p>

          <p class="mb-2"><strong>How ESP32 uses WiFi:</strong><br>
          ESP32 can act as an <em>Access Point (AP)</em> (creates its own WiFi) or as a <em>Station</em> (connects to an existing router/hotspot). We can host a simple web server to control LED.</p>

          <p class="mb-2"><strong>How to Connect:</strong><br>
          - If using <em>ESP Own Mode (AP)</em>: connect your phone’s WiFi to the ESP32 SSID shown in Serial Monitor.<br>
          - If using <em>Hotspot Mode (Station)</em>: connect ESP32 to your home router/hotspot. Use the IP address printed in Serial Monitor to access control webpage in a browser.</p>

          <p class="mb-2"><strong>Webpage/App:</strong><br>
          Any web browser (Chrome, Firefox, Edge) can be used to open the ESP32 web server page and toggle LED.
          <p class="mb-2">
            - <b>AP Mode</b>: ESP32 creates its own WiFi → default website <code>http://192.168.4.1</code>.<br>
            - <b>Station Mode</b>: ESP32 joins router/hotspot → website is IP shown in Serial Monitor (e.g. <code>192.168.1.xx</code>).</p>
          </p>

          <p class="mb-2"><strong>Debugging Tip:</strong></br>
            ⚠️ When loading the web page, <b>turn off mobile data</b> and keep only WiFi ON, otherwise browser may not open ESP32 website.</p>

          <p class="mb-2"><strong>Applications:</strong></p>
          <ul class="list-disc pl-5 space-y-1">
            <li>Home automation over WiFi</li>
            <li>IoT-based devices</li>
            <li>Remote monitoring and control</li>
          </ul>
        </div>

        <!-- Buttons -->
        <div class="flex justify-center gap-4 mb-6">
          <button onclick="showCode('espOwnCode')" class="bg-purple-600 text-white px-5 py-2 rounded-xl shadow hover:bg-purple-700 transition">ESP Own</button>
          <button onclick="showCode('hotspotCode')" class="bg-yellow-600 text-white px-5 py-2 rounded-xl shadow hover:bg-yellow-700 transition">Hotspot Mode</button>
        </div>

        <!-- ESP Own Code -->
        <div id="espOwnCode" class="hidden">
          <h2 class="text-2xl font-bold mb-2 text-center">ESP Own Access Point Mode</h2>
          <pre class="bg-gray-900 text-purple-300 p-4 rounded-xl text-sm overflow-x-auto"><code>
<!-- your ESP own code unchanged -->
#include &lt;WiFi.h&gt;

const char* ap_ssid = "ESP32_LED_Control";
const char* ap_password = "12345678";

WiFiServer server(80); //Runs web server on port 80 (default HTTP port).
int ledPin = 2;

void setup() {
  Serial.begin(115200);
  pinMode(ledPin, OUTPUT);
  WiFi.softAP(ap_ssid, ap_password);
  Serial.println(WiFi.softAPIP());   //Gives ESP32’s AP IP (default 192.168.4.1)
  server.begin();
}

void loop() {
  WiFiClient client = server.available();
  if (client) {
    String request = client.readStringUntil('\r');
    client.flush();   //Clears leftover request data from client.

    if (request.indexOf("/ON") != -1) {
      digitalWrite(ledPin, HIGH);
    } else if (request.indexOf("/OFF") != -1) {
      digitalWrite(ledPin, LOW);
    }

    client.println("HTTP/1.1 200 OK");
    client.println("Content-Type: text/html");
    client.println();
    client.println("&lt;html&gt;&lt;body&gt;");
    client.println("&lt;h1&gt;LED Control&lt;/h1&gt;");
    client.println("&lt;a href='/ON'&gt;ON&lt;/a&gt; | &lt;a href='/OFF'&gt;OFF&lt;/a&gt;");
    client.println("&lt;/body&gt;&lt;/html&gt;");
    delay(1);
  }
}
</code></pre>
        </div>

        <!-- Hotspot Mode Code -->
        <div id="hotspotCode" class="hidden">
          <h2 class="text-2xl font-bold mb-2 text-center">Hotspot (Station) Mode</h2>
          <pre class="bg-gray-900 text-yellow-200 p-4 rounded-xl text-sm overflow-x-auto"><code>
<!-- your hotspot code unchanged -->
#include &lt;WiFi.h&gt;

const char* ssid = "Your_Hotspot_SSID";
const char* password = "Your_Hotspot_Password";

WiFiServer server(80);
int ledPin = 2;

void setup() {
  pinMode(ledPin, OUTPUT);
  Serial.begin(115200);
  WiFi.begin(ssid, password);
  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
  }
  Serial.println("\\nWiFi connected!");
  Serial.println(WiFi.localIP());
  server.begin();
}

void loop() {
  WiFiClient client = server.available();
  if (client) {
    String request = client.readStringUntil('\\r');
    client.flush();

    if (request.indexOf("/ON") != -1) {
      digitalWrite(ledPin, HIGH);
    } else if (request.indexOf("/OFF") != -1) {
      digitalWrite(ledPin, LOW);
    }

    client.println("HTTP/1.1 200 OK");
    client.println("Content-Type: text/html");
    client.println();
    client.println("&lt;html&gt;&lt;body&gt;");
    client.println("&lt;h1&gt;LED Control&lt;/h1&gt;");
    client.println("&lt;a href='/ON'&gt;ON&lt;/a&gt; | &lt;a href='/OFF'&gt;OFF&lt;/a&gt;");
    client.println("&lt;/body&gt;&lt;/html&gt;");
    delay(1);
  }
}
</code></pre>
        </div>
      </div>
    </div>

    <!-- Back link -->
    <div class="text-center mt-6">
      <a href="../index.html" class="text-blue-600 hover:underline text-lg font-medium">← Back to ESP32 Projects</a>
    </div>
  </div>
</body>
</html>
