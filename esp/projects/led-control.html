<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ESP32 LED Control</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script>
    function toggleSection(id) {
      document.getElementById(id).classList.toggle("hidden");
    }
    function showCode(id) {
      document.getElementById("espOwnCode").classList.add("hidden");
      document.getElementById("hotspotCode").classList.add("hidden");
      document.getElementById(id).classList.remove("hidden");
    }
  </script>
</head>
<body class="bg-white text-gray-800 min-h-screen flex flex-col items-center py-10 px-4">
  <div class="w-full max-w-4xl">
    <h1 class="text-3xl font-bold mb-6 text-center">ESP32 - LED Control</h1>
    <p class="mb-4 text-center">Control an LED using Bluetooth or WiFi with ESP32</p>

    <!-- Bluetooth Always Visible -->
    <div class="mb-10">
      <h2 class="text-2xl font-bold mb-2 text-center text-green-700">Bluetooth LED Control</h2>
      <pre class="bg-gray-100 p-4 rounded w-full overflow-x-auto mb-6">
<code>
#include "BluetoothSerial.h"

BluetoothSerial SerialBT;
int ledPin = 2;

void setup() {
  pinMode(ledPin, OUTPUT);
  Serial.begin(115200);
  SerialBT.begin("ESP32_LED"); 
  Serial.println("Bluetooth is ready. Type ON or OFF.");
}

void loop() {
  if (SerialBT.available()) {
    String command = SerialBT.readStringUntil('\n');
    command.trim();

    if (command == "ON") {
      digitalWrite(ledPin, HIGH);
      SerialBT.println("LED is ON");
    } else if (command == "OFF") {
      digitalWrite(ledPin, LOW);
      SerialBT.println("LED is OFF");
    } else {
      SerialBT.println("Invalid command");
    }
  }
}
</code>
      </pre>
    </div>

    <!-- WiFi Toggle -->
    <div class="text-center mb-6">
      <button onclick="toggleSection('wifiNotes')" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">WiFi</button>
    </div>

    <!-- WiFi Notes + Mode Buttons -->
    <div id="wifiNotes" class="hidden">
      <div class="bg-blue-50 p-4 rounded mb-4">
        <h3 class="text-xl font-semibold mb-2">WiFi Modes - Difference</h3>
        <p class="mb-2"><strong>ESP Own (Access Point mode):</strong> ESP32 creates its own WiFi network. You connect your phone directly to ESP32. No internet needed.</p>
        <p class="mb-2"><strong>Hotspot Mode (Station mode):</strong> ESP32 connects to your existing hotspot/router and gets an IP address. Both devices must be on same network.</p>
      </div>

      <!-- Buttons for two modes -->
      <div class="flex justify-center gap-4 mb-6">
        <button onclick="showCode('espOwnCode')" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">ESP Own</button>
        <button onclick="showCode('hotspotCode')" class="bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700">Hotspot Mode</button>
      </div>

      <!-- ESP Own Code -->
      <div id="espOwnCode" class="hidden">
        <h2 class="text-2xl font-bold mb-2 text-center">ESP Own Access Point Mode</h2>
        <pre class="bg-gray-100 p-4 rounded w-full overflow-x-auto mb-6">
<code>
#include &lt;WiFi.h&gt;

const char* ap_ssid = "ESP32_LED_Control";
const char* ap_password = "12345678";

WiFiServer server(80);
int ledPin = 2;

void setup() {
  Serial.begin(115200);
  pinMode(ledPin, OUTPUT);
  WiFi.softAP(ap_ssid, ap_password);
  Serial.println(WiFi.softAPIP());
  server.begin();
}

void loop() {
  WiFiClient client = server.available();
  if (client) {
    String request = client.readStringUntil('\r');
    client.flush();

    if (request.indexOf("/ON") != -1) {
      digitalWrite(ledPin, HIGH);
    } else if (request.indexOf("/OFF") != -1) {
      digitalWrite(ledPin, LOW);
    }

    client.println("HTTP/1.1 200 OK");
    client.println("Content-Type: text/html");
    client.println();
    client.println("&lt;html&gt;&lt;body&gt;");
    client.println("&lt;h1&gt;LED Control&lt;/h1&gt;");
    client.println("&lt;a href='/ON'&gt;ON&lt;/a&gt; | &lt;a href='/OFF'&gt;OFF&lt;/a&gt;");
    client.println("&lt;/body&gt;&lt;/html&gt;");
    delay(1);
  }
}
</code>
        </pre>
      </div>

      <!-- Hotspot Mode Code -->
      <div id="hotspotCode" class="hidden">
        <h2 class="text-2xl font-bold mb-2 text-center">Hotspot (Station) Mode</h2>
        <pre class="bg-gray-100 p-4 rounded w-full overflow-x-auto mb-6">
<code>
#include &lt;WiFi.h&gt;

const char* ssid = "Your_Hotspot_SSID";
const char* password = "Your_Hotspot_Password";

WiFiServer server(80);
int ledPin = 2;

void setup() {
  pinMode(ledPin, OUTPUT);
  Serial.begin(115200);
  WiFi.begin(ssid, password);
  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
  }
  Serial.println("\nWiFi connected!");
  Serial.println(WiFi.localIP());
  server.begin();
}

void loop() {
  WiFiClient client = server.available();
  if (client) {
    String request = client.readStringUntil('\r');
    client.flush();

    if (request.indexOf("/ON") != -1) {
      digitalWrite(ledPin, HIGH);
    } else if (request.indexOf("/OFF") != -1) {
      digitalWrite(ledPin, LOW);
    }

    client.println("HTTP/1.1 200 OK");
    client.println("Content-Type: text/html");
    client.println();
    client.println("&lt;html&gt;&lt;body&gt;");
    client.println("&lt;h1&gt;LED Control&lt;/h1&gt;");
    client.println("&lt;a href='/ON'&gt;ON&lt;/a&gt; | &lt;a href='/OFF'&gt;OFF&lt;/a&gt;");
    client.println("&lt;/body&gt;&lt;/html&gt;");
    delay(1);
  }
}
</code>
        </pre>
      </div>
    </div>

    <div class="text-center mt-6">
      <a href="../index.html" class="text-blue-600 hover:underline">‚Üê Back to ESP32 Projects</a>
    </div>
  </div>
</body>
</html>
